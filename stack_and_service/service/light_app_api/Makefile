RTE_SDK=$(CURRENT_DIR)dpdk-17.02
RTE_TARGET ?= x86_64-native-linuxapp-gcc
include $(RTE_SDK)/mk/rte.vars.mk
SRC_ROOT=$(CURRENT_DIR)
SRCS-y :=  light_api.c ../../log/light_log.c
SRCS-y += ../ll.c
#CFLAGS += -g
CFLAGS += -Ofast
#CFLAGS += -O0  
CFLAGS += $(WERROR_FLAGS) 
DPDK_HEADERS=$(SRC_ROOT)x86_64-native-linuxapp-gcc/include
ALL_HEADERS = -I$(DPDK_HEADERS) -I./ -I$(SRC_ROOT)stack_and_service/
CFLAGS += $(ALL_HEADERS) -DMAXCPU=32 -D__UAPI_DEF_IN6_ADDR=1 -D__UAPI_DEF_SOCKADDR_IN6=1 -D__UAPI_DEF_IN6_ADDR_ALT=1 -DCONFIG_INET\
-D__UAPI_DEF_IPPROTO_V6=1 -DCONFIG_SLAB -DCONFIG_HZ=4000 -DNR_CPUS=32 -DCONFIG_64BIT -DCONFIG_SMP \
-DCONFIG_NETFILTER -DCONFIG_NETLABEL \
-DCONFIG_X86_64 -DCONFIG_GENERIC_ATOMIC64 -DTCP_BIND_CACHE_SIZE=16384 \
-DINET_PEER_CACHE_SIZE=16384 -DSOCK_CACHE_SIZE=32768 -DRUN_TO_COMPLETE -DMAX_PKT_BURST=32 \
-DMULTIPLE_MEM_ALLOC=0 -DOPTIMIZE_SENDPAGES -DOPTIMIZE_TCP_RECEIVE -DCONFIG_NET_POLL_CONTROLLER -DMBUF_SIZE=1448
SHARED = liblightservice.so
include $(RTE_SDK)/mk/rte.extshared.mk
